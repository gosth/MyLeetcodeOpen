# 二分查找

## 二段性的理解

二分查找的应用不止于单调性, 符合二段性即可。

简而言之，***对于某个性质，当前的可行区间上，一半满足、一半不满足，就可以二分找分界点。***


详细地说明：对于某个性质，在当前的可行区间中，存在一个分界点，使得分界点左侧（或右侧）的区间内的元素满足某个条件，而分界点右侧（或左侧）的区间内的元素不满足这个条件。这两个区间在序列中是连续的。关键点在于满足条件和不满足条件的元素在序列中是连续的，而且有一个明确的分界点。

“连续”这个词的含义是，满足条件的元素都紧密地排列在一起，不满足条件的元素也都紧密地排列在一起，而且满足条件的元素部分和不满足条件的元素部分之间没有其他元素。也就是说，如果我们按照序列的顺序从头到尾查看，那么我们首先会看到一串满足条件的元素，然后紧接着看到一串不满足条件的元素，或者反过来。

比方说， 对于一个函数 f(x)，参数 x 的域可以分成两段，对一段来说 f(x) 满足一个性质， 另一段来说不满足这个性质，那么就可以用二分法来求解这两段的边界。

***单调性是二段性的一种特例***：在一个非递减函数中查找目标的左界， 可以用 f(x)>=target 这个条件，把参数域分成两段， 左边的不满足、右边的满足，然后应用二分法。

二分法不要求单调性，更不要求严格的单调性。 本质的理解上，只要有二段性就可以用二分。

![Alt text](https://writings.sh/assets/images/posts/binary-search/bs-fx.png)

## 二分查找用于解决哪些问题
+ 查找目标值：在一个有序序列中查找一个特定的目标值。例如，在一个递增排序的数组中查找一个给定的数。通过二分查找，我们可以在O(logn)的时间复杂度内找到目标值或确定目标值不存在于序列中。

+ 查找分界点：在一个具有二段性的序列中查找一个分界点，使得分界点左边的元素满足某个条件，分界点右边的元素不满足这个条件，或者相反。例如，在一个递增排序的数组中查找第一个大于等于给定值的元素。

+ 查找最大（最小）值：在一个单峰（或单谷）序列中查找最大（最小）值。例如，在一个先递增后递减的序列中查找最大值。通过二分查找，我们可以在O(logn)的时间复杂度内找到最大（最小）值。

+ 求解具有单调性的数学问题：在一些具有单调性的数学问题中，可以使用二分查找来求解。例如，求解一个单调递增的函数在某个区间上的零点或者满足某个条件的点。

总之，二分查找算法主要用于解决有序序列、具有二段性或单调性的问题。这种算法具有较高的查找效率，时间复杂度为O(logn)，在处理大规模数据时具有较好的性能。

## 题目中包含下列信息时，考虑使用二分查找
+ 有序数组/列表：这是二分查找的基础，如果待查找的数据是无序的，那么二分查找通常不能工作。

+ 时间复杂度：二分查找的时间复杂度为O(log n)，因此如果题目要求进行高效的查找，那么可能需要使用二分查找或其他具有类似时间复杂度的算法。

+ 寻找一个特定的元素：这是二分查找最基本的任务，也适用于寻找元素的最左侧或最右侧出现位置，或者确定一个元素是否存在于数组中。

+ 寻找满足某种条件的元素：如果问题可以转化为寻找一个目标值，或者找到满足某种条件的最小或最大值，那么可能可以使用二分查找。注意这里的条件通常需要满足“单调性”，即随着输入值的增大或减小，输出值单调递增或递减。

+ 猜数问题：二分查找本质上是一种猜数策略，每次都猜测数组中间的元素，并据此缩小查找范围。因此对于一些需要猜测某个数的问题，比如力扣第374题中计算机要猜测你选的数字，也可以考虑使用二分查找。

+ 旋转数组查找：如果一个排序数组被分割成两部分，然后这两部分的顺序被交换（也就是所谓的旋转数组），如力扣第33题：搜索旋转排序数组，那么在这样的数组中查找元素时也可以使用二分查找的变种。

+ 查找“峰值”：在一个数组中查找“峰值”，即比两侧邻居都大（或小）的元素。例如力扣第162题寻找峰值，这样的问题通常需要找到达到某种条件的最左侧或最右侧的元素，因此可以使用二分查找。

## 二分模板（开区间红蓝染色法）
```cpp
// 待查询区间。二分查找完成后，划分为左蓝右红
std::vecot<int> data{2,3,4,5,6,7};
int l = -1, r = data.size();
// (l, r)
while (l + 1 < r) {
    int mid = l + (r - l) / 2;
    if IsBlue(m) {
        l = m;
    } else {
        r = m;
    }
}
return l or r;
```

![Alt text](https://img-blog.csdnimg.cn/44ef953b03904589b44a135f4690e81d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bCPwrflubjCt-i_kA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

![Alt text](https://img-blog.csdnimg.cn/f682904971ab4168ac980255f51359d6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5bCPwrflubjCt-i_kA==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)

+ l和r的初始值：因为是开区间查询，所以l是-1，r为N（数组大小，而不是数组最后一个元素的下标）
+ 循环条件是while (l + 1 < r)：只要区间有值就应该进入循环。采用的是开区间(l,r),如(4,6)区间有值“5”，要进入循环；而(4,5)区间没有值，故跳出循环。
+ 流程：（1）划分蓝红区域，确定IsBlue函数；（2）确定返回l还是r；（3）套用算法模板；（4）后处理

## 参考视频
https://www.bilibili.com/video/BV1d54y1q7k7/?spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=79c14e6eb4e17fa8f69cfb20c08ce512